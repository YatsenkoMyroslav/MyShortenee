{"ast":null,"code":"import _asyncToGenerator from \"/Users/myroslavyatsenko/RiderProjects/MyShortenee/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpParams } from \"@angular/common/http\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction ShortenComponent_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ShortenComponent_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.Delete();\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class ShortenComponent {\n  constructor(httpClient, rout, route) {\n    this.httpClient = httpClient;\n    this.api_url = 'https://localhost:7130/getfullshorten';\n    this.delete_url = 'https://localhost:7130/api/Shorten/delete/';\n    this.canDelete = false;\n    this.shorten = {};\n\n    if (sessionStorage.getItem('isAuthenticated') !== 'true') {\n      route.navigate(['/shortens']);\n    }\n\n    this.http = httpClient;\n    const shortUrl = rout.snapshot.params['id'];\n    const params = new HttpParams().set('shortUrl', shortUrl);\n    this.route = route;\n    this.http.get(this.api_url, {\n      params\n    }).subscribe(res => {\n      this.shorten = res;\n      this.canDelete = this.CanDelete(this.shorten.createdBy.id);\n    });\n  }\n\n  CanDelete(ownerId) {\n    return sessionStorage.getItem('role') === 'Admin' || sessionStorage.getItem('userId') === ownerId;\n  }\n\n  Delete() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const url = _this.delete_url + _this.shorten.id;\n      yield _this.http.delete(_this.delete_url + _this.shorten.id).subscribe(res => {});\n      yield _this.route.navigate(['/shortens']);\n    })();\n  }\n\n}\n\nShortenComponent.ɵfac = function ShortenComponent_Factory(t) {\n  return new (t || ShortenComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nShortenComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShortenComponent,\n  selectors: [[\"app-shorten\"]],\n  decls: 17,\n  vars: 8,\n  consts: [[1, \"mt-3\"], [1, \"mt-2\"], [1, \"mt-4\"], [3, \"href\"], [\"class\", \"btn btn-danger\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function ShortenComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\", 0);\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"p\", 1);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"h3\", 2);\n      i0.ɵɵtext(5, \"Shortee\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\")(7, \"a\", 3);\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"h3\", 0);\n      i0.ɵɵtext(10, \"Full\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\")(12, \"a\", 3);\n      i0.ɵɵtext(13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"h4\", 0);\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(16, ShortenComponent_button_16_Template, 2, 0, \"button\", 4);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.shorten.shortenName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.shorten.shortenDescription);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"href\", ctx.shorten.fullUrl, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\"https:localhost:44427/\", ctx.shorten.shortUrl, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"href\", ctx.shorten.fullUrl, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.shorten.fullUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Created by \", ctx.shorten.createdBy.userName, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.canDelete);\n    }\n  },\n  directives: [i3.NgIf],\n  encapsulation: 2\n});","map":{"version":3,"sources":["/Users/myroslavyatsenko/RiderProjects/MyShortenee/ClientApp/src/app/shorten/shorten.component.ts"],"names":["HttpParams","i0","i1","i2","i3","ShortenComponent_button_16_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ShortenComponent_button_16_Template_button_click_0_listener","ɵɵrestoreView","ctx_r1","ɵɵnextContext","Delete","ɵɵtext","ɵɵelementEnd","ShortenComponent","constructor","httpClient","rout","route","api_url","delete_url","canDelete","shorten","sessionStorage","getItem","navigate","http","shortUrl","snapshot","params","set","get","subscribe","res","CanDelete","createdBy","id","ownerId","url","delete","ɵfac","ShortenComponent_Factory","t","ɵɵdirectiveInject","HttpClient","ActivatedRoute","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","ShortenComponent_Template","ɵɵtemplate","ɵɵadvance","ɵɵtextInterpolate","shortenName","shortenDescription","ɵɵproperty","fullUrl","ɵɵsanitizeUrl","ɵɵtextInterpolate1","userName","directives","NgIf","encapsulation"],"mappings":"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","sourcesContent":["import { HttpParams } from \"@angular/common/http\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction ShortenComponent_button_16_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ShortenComponent_button_16_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r2); const ctx_r1 = i0.ɵɵnextContext(); return ctx_r1.Delete(); });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n} }\nexport class ShortenComponent {\n    constructor(httpClient, rout, route) {\n        this.httpClient = httpClient;\n        this.api_url = 'https://localhost:7130/getfullshorten';\n        this.delete_url = 'https://localhost:7130/api/Shorten/delete/';\n        this.canDelete = false;\n        this.shorten = {};\n        if (sessionStorage.getItem('isAuthenticated') !== 'true') {\n            route.navigate(['/shortens']);\n        }\n        this.http = httpClient;\n        const shortUrl = rout.snapshot.params['id'];\n        const params = new HttpParams().set('shortUrl', shortUrl);\n        this.route = route;\n        this.http.get(this.api_url, { params }).subscribe((res) => {\n            this.shorten = res;\n            this.canDelete = this.CanDelete(this.shorten.createdBy.id);\n        });\n    }\n    CanDelete(ownerId) {\n        return sessionStorage.getItem('role') === 'Admin' || sessionStorage.getItem('userId') === ownerId;\n    }\n    async Delete() {\n        const url = this.delete_url + this.shorten.id;\n        await this.http.delete(this.delete_url + this.shorten.id).subscribe((res) => {\n        });\n        await this.route.navigate(['/shortens']);\n    }\n}\nShortenComponent.ɵfac = function ShortenComponent_Factory(t) { return new (t || ShortenComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router)); };\nShortenComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ShortenComponent, selectors: [[\"app-shorten\"]], decls: 17, vars: 8, consts: [[1, \"mt-3\"], [1, \"mt-2\"], [1, \"mt-4\"], [3, \"href\"], [\"class\", \"btn btn-danger\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]], template: function ShortenComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"p\", 1);\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"h3\", 2);\n        i0.ɵɵtext(5, \"Shortee\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\")(7, \"a\", 3);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"h3\", 0);\n        i0.ɵɵtext(10, \"Full\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\")(12, \"a\", 3);\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"h4\", 0);\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, ShortenComponent_button_16_Template, 2, 0, \"button\", 4);\n    } if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.shorten.shortenName);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.shorten.shortenDescription);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"href\", ctx.shorten.fullUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"https:localhost:44427/\", ctx.shorten.shortUrl, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"href\", ctx.shorten.fullUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.shorten.fullUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Created by \", ctx.shorten.createdBy.userName, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.canDelete);\n    } }, directives: [i3.NgIf], encapsulation: 2 });\n"]},"metadata":{},"sourceType":"module"}